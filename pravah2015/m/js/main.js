var sidebar = [
	
	{
		'to'   : 'home',
		'name' : 'Home'
	},

	{
		'to'   : 'facebook_likebutton',
		'name' : '<iframe src="http://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fpravah2015&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width:150px;" allowTransparency="true"></iframe>',
		'header' : false
	},

 	{
		'to'   : 'register',
		'name' : 'Register'
	},

	{
		'to'   : 'about',
		'name' : 'About Us'
	},
	{
		'to'   : 'competitions',
		'name' : 'Competitions'
	},
	{
		'to'   : 'workshops',
		'name' : 'Workshops'
	},
	{
		'to'   : 'exhibitions',
		'name' : 'Exhibitions'
	},
 	{
		'to'   : 'initiatives',
		'name' : 'Initiatives'
	},
 	{
		'to'   : 'gallery',
		'name' : 'Gallery',
		'header' : false
	},
/*
	{
		'to'   : 'schedule',
		'name' : 'Schedule'
	},
 */
	{
		'to'   : 'partners',
		'name' : 'Sponsors'
	},
	{
		'to'   : 'hospitality',
		'name' : 'Hospitality',
		'header' : false
	},
	{
		'to'   : 'contact',
		'name' : 'Contact Us',
		'header' : false
	},
	{
		'to'   : 'aaveg',
		'name' : 'Aaveg'
	},
 	{
		'to'   : '',
		'name' : ''
	}
];


var categories = {
	'Dance' : {
	},

	'Fine Arts' : {
	},

	'Digital Arts' : {
	},

	'Dramatics' : {
	},

	'Literary' : {
	},

	'Music' : {
	},

	'Techtrix - CE' : {
	},

	'Techtrix - CS' : {
	},

	'Techtrix - EC' : {
	},

	'Techtrix - ME' : {
	},

	'RoboKon' : {
	},

	'Funtrix' : {
	},

	'Lan Gaming' : {
	},

	'Quiz' : {
	}
};

var contacts = [
		{
			'team'   : 'Managers',
			'name'   : 'Gyanesh Kumar',
			'mobile' : '8824 871 012',
			'fb'     : 'Gyaneshkumar93',
			'email'  : 'gyaneshkumar93@gmail.com'
		},

	 	{
			'team'   : 'Managers',
			'name'   : 'Gaurav Kanthaliya',
			'mobile' : '9461 140 098',
			'fb'	 : 'gaurav.kanthaliya',
			'email'  : 'gaurav.kanthaliya@gmail.com'
		},

	 	{
			'team'   : 'Event Manager',
			'name'   : 'Gaurav Mehra',
			'fb'     : '',
			'email'  : 'urmylifeecb@gmail.com',
			'mobile' : '8947 991 627'
		},

	 	{
			'team'   : 'Sponsorship Coordinators',
			'name'   : 'Devesh Jain',
			'fb'     : 'Jaindevesh.dj007',
			'email'  : 'jaindevesh.dj@gmail.com',
			'mobile' : '9610 379 998'
		},

	 	{
			'team'   : 'Sponsorship Coordinators',
			'name'   : 'Praveen Bishnoi',
			'fb'     : 'prvin29',
			'email'  : '',
			'mobile' : '8385 888 425'
		},

	 	{
			'team'   : 'Sponsorship Coordinators',
			'name'   : 'Vishwas Jain',
			'fb'     : 'vishwas.jain.180',
			'email'  : 'vishu.donny@gmail.com',
			'mobile' : '8385 888 425'
		},

	 	{
			'team'   : 'Sponsorship Coordinators',
			'name'   : 'Sarvesh Sharma',
			'fb'     : '',
			'email'  : '',
			'mobile' : ''
		},


	 	{
			'team'   : 'Publicity & Public Relations',
			'name'   : 'Hardik Mathur',
			'fb'     : 'HardikMathurExclusive',
			'email'  : 'talkin_sense@live.com',
			'mobile' : '9530 000 051'
		},


	 	{
			'team'   : 'Publicity & Public Relations',
			'name'   : 'Himanshu Singh',
			'fb'     : '',
			'email'  : '',
			'mobile' : ''
		},

	 	{
			'team'   : 'Creativity & Web Coordinators',
			'name'   : 'Rajat Goel',
			'email'  : 'rajatgl17@gmail.com',
			'mobile' : '8384 999 7569',
			'fb'	 :	'rajatgl17'
		},

	 	{
			'team'   : 'Creativity & Web Coordinators',
			'name'   : 'Subroto Biswas',
			'fb'	 : 'subroto.biswas3',
			'mobile' : '8107 073 754',
			'email'  : 'sub14biswas@gmail.com'
		},

		{
			'team'   : 'Creativity & Web Coordinators',
			'name'   : 'Hari Singh',
			'mobile' : '7737 551 411',
			'email'  : 'hari.singh@acan.in',
			'fb'     : 'hsbijarniya'
		},

		{
			'team'   : 'Creativity & Web Coordinators',
			'name'   : 'Milind Sharma',
			'mobile' : '7597 557 308',
			'email'  : 'milind4computing@gmail.com',
			'fb'     : '100004759695186'
		},

		{
			'team'   : 'Venue Coordinators',
			'name'   : 'Kartik Gautam',
			'fb'	 : 'kartik.j.gautam',
			'mobile' : '9694 516 190',
			'email'  : 'kartikgautam1994@gmail.com'
		},

		{
			'team'   : 'Venue Coordinators',
			'name'   : 'Ayush Khandelwal',
			'fb'	 : 'ayush.khandelwal.503',
			'mobile' : '9460 418 505',
			'email'  : 'khandelwalayush1610@gmail.com'
		},

		

		{
			'team'   : 'Social Media Coordinator',
			'name'   : 'Jai Agrawal',
			'fb'     : 'jai.agrawal.90',
			'email'  : '',
			'mobile' : '8560 860 861'
		},
/*		{
			'team'   : 'Annual Day Coordinator',
			'name'   : 'Akansh Rastogi',
			'mobile' : '8058 563 831',
			'fb'     : 'akansh.rastogi.1',
			'email'  : 'rastogi.akansh@gmail.com'
		},
		{
			'team'   : 'Annual Day Coordinator',
			'name'   : 'Pratyusha Mishra',
			'mobile' : '7742 435 048',
			'fb'     : 'pratyusha.mishra.3',
			'email'  : 'mishra.pm1995@gmail.com '
		},
		{
			'team'   : 'Annual Day Coordinator',
			'name'   : 'Chintan Goyal',
			'mobile' : '9462 010 301',
			'fb'     : 'chintan.goyal',
			'email'  : 'chintan308@gmail.com'
		},
	*/	{
			'team'   : 'Social Causes Coordinator',
			'name'   : 'Anshuman Goswami',
			'mobile' : '9460 000 142',
			'fb'     : 'ANSHUMAN.GOSWAMI2594',
			'email'  : 'icecool22594@gmail.com'
		},
		{
			'team'   : 'Social Causes Coordinator',
			'name'   : 'Sagar Vashist',
			'mobile' : '7742 802 049',
			'fb'     : 'sagar.vashist.71',
			'email'  : 'sagar3vashist@gmail.com'
		}
];


var workshops = [
	{
		'name'  : 'Digital Image Processing',
		'category'   : 'Workshops',
		'pages' :{
			'Detail' : true
		}
	},

	{
		'name'  : 'RoboKon',
		'category'   : 'Workshops',
		'pages' :{
			'Detail' : true
		}
	}

];



var competitions = [
	{
		'name'  : 'Fifa',
		'category'   : 'Lan Gaming',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Counter Strike',
		'category'   : 'Lan Gaming',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'NFS',
		'category'   : 'Lan Gaming',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Bridge-o-Mania',
		'category'   : 'Techtrix - CE',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Card Castle',
		'category'   : 'Techtrix - CE',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Digitronics',
		'category'   : 'Techtrix - EC',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'C/C++ Challenger',
		'category'   : 'Techtrix - CS',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Sharp',
		'category'   : 'Techtrix - CS',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Assemblaze',
		'category'   : 'Techtrix - ME',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Cad-o-Mania',
		'category'   : 'Techtrix - ME',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Dancing Fingers',
		'category'   : 'Music',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Dumb Charades',
		'category'   : 'Dramatics',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Treasure Hunt',
		'category'   : 'Funtrix',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Brainy Games',
		'category'   : 'Funtrix',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Kwizz Net',
		'category'   : 'Quiz',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Bollywood Trivia',
		'category'   : 'Funtrix',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Mini Soccer',
		'category'   : 'Funtrix',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'A Game Stall',
		'category'   : 'Funtrix',
		'pages' : {
			'Detail' : true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Junkyard Wars',
		'category'   : 'RoboKon',
		'pages' : {
			'Detail': true,
			'Rules': false,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Kavyanjali',
		'category'   : 'Literary',
		'pages' : {
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Nukkad Natak',
		'category'   : 'Dramatics',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Papperaazi',
		'category'   : 'Techtrix - CE',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Robo Wars',
		'category'   : 'RoboKon',
		'pages' : {
			'Detail': true,
			'Rules': true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Pirates War',
		'category'   : 'RoboKon',
		'pages' : {
			'Detail': true,
			'Rules': false,
			'Contact'   : true
		}
	},

	{
		'name'  : 'X-Copter',
		'category'   : 'RoboKon',
		'pages' : {
			'Detail': true,
			'Rules': false,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Rangmanch',
		'category'   : 'Dramatics',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Rangrez',
		'category'   : 'Fine Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Shades',
		'category'   : 'Fine Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Collage Making',
		'category'   : 'Fine Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Rangoli',
		'category'   : 'Fine Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Streetz',
		'category'   : 'Dance',
		'pages' :{
			'Detail' : true,
			'Rules'  : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Straw Scrapper',
		'category'   : 'Techtrix - CE',
		'pages' :{
			'Detail': true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Sur',
		'category'   : 'Music',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Clash Of Band',
		'category'   : 'Music',
		'pages' : {
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'War of DJs',
		'category'   : 'Music',
		'pages' : {
			'Detail' : true,
//			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Solo',
		'category'   : 'Dance',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Group',
		'category'   : 'Dance',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Robo Race',
		'category'   : 'RoboKon',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Ping Pong',
		'category'   : 'RoboKon',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Mechatron',
		'category'   : 'RoboKon',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Line Follower',
		'category'   : 'RoboKon',
		'pages' :{
			'Detail' : true,
			'Rules' : false,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Documania',
		'category'   : 'Digital Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Snapshot',
		'category'   : 'Digital Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	},

	{
		'name'  : 'Pravah Selfie',
		'category'   : 'Digital Arts',
		'pages' :{
			'Detail' : true,
			'Rules' : true,
			'Contact'   : true
		}
	}
];



function formatMobile( mobile_number ) {
	
}


function showWorkshops(){
}

function showEventList( category ) {
	$('.event_list').hide('blind', function () {
		$(this).remove();
	});

	var eventList = $('<div class="event_list"></div>').hide();

	for(var index in competitions) {
		if (competitions[index].category == category) {
			eventList.append(
				$('<div event_id="'+ index +'">'+ competitions[index].name +'</div>').on('click', function(){
					showEventDetail( +$(this).attr('event_id') );
				})
			);
		}
	}

	$(window.navigator.userAgent.match(/mobile|tablet/i) || $(window).height() >= $(window).width() ? ('.competitions_list div.event_category.'+ category) : '.competitions_list' ).after( eventList );
	$('.event_detail').load('/pages/competitions_about.html');
	$('.event_list').show('blind');
}



function showEventDetail( event_id ) {
	var event = competitions[event_id], default_page;

	$('.event_title div.text').text( event.name );
	$('.event_title').show();

	$('.event_tabs').html('');

	for (var page in event.pages) {
		if (!default_page) default_page = page;

		$('.event_tabs').append(
			$('<div event_id='+ event_id +' page="'+ page +'">'+ page +'</div>').on('click', function() {
				$('.event_tabs > div').removeClass('bold');
				$(this).addClass('bold');

				var event = competitions[ +$(this).attr('event_id') ];
				var page  = $(this).attr('page');

				$('.event_detail').html('').load('/pages/'+ (event.name +'_'+ page).toLowerCase().replace(/ /g, '_') +'.html', function(){
					if ($(window).height()-85 > $('.event_description').height())
						$('.event_description').css('margin-top', ($(window).height()- 85 - $('.event_description').height())*0.5 + 'px');
					else
						$('.event_description').css('margin-top', '');
				});
			})
		);
	}

	$('.event_tabs').show('blind', 500);
	$('.event_body, .event_description').show();
	$('.event_tabs > div[page="'+ default_page +'"]').trigger('click');
}



function autoAdjust(){
	if( window.navigator.userAgent.match(/mobile|tablet/i) || $(window).height() >= $(window).width() ) {
		$('.event_description').css('min-width', '0');
		$('.competitions_list').css('margin', '60px 0px 40px 0px');
		$('#pravah').css('margin', '-100px 0 0 -150px');
		$('#menubar').css('background', 'rgba(0,0,0,0.8)');
		$('#menubar, #text, #timer').hide('blind', 500);
		$('#panel').animate({'left':'0'}, 500);
		$('#toolbar').show('blind', 500);
	}

	if( $(window).height() < $(window).width()) {
		$('.event_description').css('min-width', '355px');
		$('.competitions_list').css('margin', '30px 0px 30px 0px');
		$('#pravah').css('margin', '-200px 0 0 -300px');
		$('#menubar').css('background', 'transparent');
		$('#menubar, #text, #timer').show('blind', 500);
		$('#panel').animate({'left':'180px'}, 500);
		$('#toolbar').hide('blind', 500);
	}
}

function loadPage( hash ) {
	var animation_name = ['blind', 'clip', 'drop', 'fold', 'puff', 'scale', 'size', 'slide'][Math.floor(Math.random()*8)];

	$('li.highlight').removeClass('highlight');

	$('#panel').hide(animation_name, {'complete': function(){
		$('.content_box').hide();

		path = hash.split("/");

		for(var index in path){
			var page = path[index];

			// 
			if (index==0) {
				if (page == 'home'){
					$('#pravah, #timer').css('opacity', '0.8');
					$('li[to="home"]').hide('blind', 500);
				}
				else
				{
					$('#pravah, #timer').css('opacity', '0.2');
					$('li[to="home"]').show('blind', 500);

					$('.'+ page +'.content_box').show();
					$('#panel').show(animation_name, 500);
					$('li[to="'+ page +'"]').addClass('highlight', 500);
				}

				if (page == 'about') {
					$('#content2.content_box.about').load('/pages/about.html');
				}

				if (page == 'hospitality') {
					$('#content2.content_box.hospitality').load('/pages/accommodation.html');
				}

				if (page == 'initiatives') {
					$('#content2.content_box.initiatives').load('/pages/initiatives.html');
				}

				if (page == 'exhibitions') {
					$('#exhibition_content').load('/pages/exhibitions.html');
				}

				if (page == 'partners') {
					$('#content2.content_box.partners').load('/pages/sponsors.html');
				}

				if (page == 'workshops') {
					$('#workshop_content').load('/pages/workshops.html');
				}
			}

			// competition event
			if (index==1) {
				$('li[event_id="'+ page +'"]').trigger('click');
			}

			// competition tabs
			if (index==2) {
				$('div[page="'+ page +'"]').trigger('click');
			}
		}
	}}, 500);
}

$(function() {
	$('.event_title').on('click', function(){
		$('.event_body').hide();
	});


	// NEW
	$('div.competitions_category_title').on('click', function(){
	});

	for(var index in categories) {
		$('#competitions').append(
				$('<div id="competitions_category" competitions_category="'+ index +'">' +
					'<ul id="competitions_category_events" class="competitions_category_events"></ul>' +
				'</div>').prepend(
					$('<div id="competitions_category_title" class="competitions_category_title">'+ index +'</div>').click(function(){
						$('.competitions_category_events').hide();
						$(this).parent().children('.competitions_category_events').show();
					})
				)
			);
	}
	for(var index in competitions) {
		$('#competitions > #competitions_category[competitions_category="'+ competitions[index].category +'"] > ul#competitions_category_events').append(
			$('<li event_id="'+ index +'">'+ competitions[index].name +'</li>').on('click', function(){
				showEventDetail( +$(this).attr('event_id') );
			})
		);

/* 		if (competitions[index].category == category) {
			eventList.append(
				$('<div event_id="'+ index +'">'+ competitions[index].name +'</div>').on('click', function(){
					showEventDetail( +$(this).attr('event_id') );
				})
			);
		}
 */	}


	$('#drawer').on('click', function(){
		$(this).animate({'backgroundPositionX' : ($(this).css('backgroundPositionX')=='0px' ? '-15px' : '0px') }, 300);
		$('#menubar').css('z-index', 5000).toggle('slide', 300);
	});

/* 	for(var index in categories) {
		$('.competitions_list').append('<div class="event_category '+ index +'" event_category="'+ index +'">'+ index +'</div>');
	}
 */
	for(var index in sidebar) {
		$('#sidebar').append('<li to="'+ sidebar[index].to +'" class="sidebar_child '+ sidebar[index].to +'">'+ sidebar[index].name +'</li>');
	}


	var lastTeam;
	for(var index in contacts) {
		if (lastTeam != contacts[index].team) {
			lastTeam = contacts[index].team;
			$('#contacts').append('<h2 id="contact_team">'+ contacts[index].team +'</h2>');
		}

		$('#contacts').append('<div contact_id='+ index +' class="contact_box"><div style="background: url(/images/contact/'+ contacts[index].name.replace(/ /g, '_').toLowerCase() +'.jpg);" class="contact_image"><div class="contact_phone"></div><div class="contact_email"></div></div><div class="contact_name">'+ contacts[index].name +'</div><div class="contact_mobile">'+ (contacts[index].email || (contacts[index].mobile ? ('+91 ' + contacts[index].mobile) : '') || '-') +'</div></div>');
	}

	$('ul#sidebar > li').on('click', function(){
//		autoAdjust();

//		if ( ['home', 'about', 'partners', 'initiatives', 'competitions', 'exhibitions', 'workshops', 'hospitality', 'contact'].indexOf(window.location.hash.slice(1)) == -1 ) return false;
		var _to_ = $(this).attr('to');

		if ( _to_ == 'hospitality' ) { window.open('http://skitpravah.com/register/hospitality', '_self'); return false; }
		if ( ['aaveg', 'gallery', 'register'].indexOf(_to_) >= 0 ) { window.open('/'+_to_, '_self'); return false; }

		loadPage( _to_ );
		window.location.hash = _to_;

		return false;
	});


	// load coordinator's face book profile
	$('.contact_name').on('click', function(){
		window.open('https://www.facebook.com/'+ contacts[+$(this).parent().attr('contact_id')].fb, '_blank');
	});


	// toggle between email & mobile
	$('.contact_phone').click(function(){
		var contact = contacts[ +$(this).parent().parent().attr('contact_id') ];

		$(this).parent().parent().children('.contact_mobile').text( (contact.mobile ? ('+91 ' + contact.mobile) : '') || '-' );

		return false;
	});
	$('.contact_email').on('click', function(){
		var contact = contacts[ +$(this).parent().parent().attr('contact_id') ];

		$(this).parent().parent().children('.contact_mobile').text( contacts[ +$(this).parent().parent().attr('contact_id') ].email || '-' );

		return false;
	});


	// show category detailed competitions list
	$('.event_category').click(function(){
		$('.event_list, .event_tabs, .event_title').hide('blind', 500);
		showEventList( $(this).attr('event_category') );
		$('.event_list').show('blind', 500);
	});

	$('.event_list, .event_tabs, .event_title').hide();

	if ( !window.location.hash ) window.location.hash = 'home'; 
	loadPage( window.location.hash.slice(1) );


	$(window).resize( autoAdjust );
	autoAdjust();

	$(window).on('keydown', function(e){
		if (e.keyCode==27) $('.event_title').trigger('click');
	});

});